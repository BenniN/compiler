if [ `id -u` -ne 0 ]
then
   echo "must be root for essential package installation"
   exit 1
fi

RASPBIAN8=0
grep "PRETTY_NAME=\"Raspbian GNU/Linux 8 (jessie)\"" /etc/os-release >/dev/null
rc=$?
if [ $rc -eq 0 ]
then
   echo "detected: Raspbain 8 jessie "
   RASPBIAN8=1
fi

if [ "$RASPBIAN8" -ne "1" ] 
then
   echo "host linux version not detected"
   cat /etc/os-release
   exit 1
fi

if [ $RASPBIAN8 -eq 1 ] 
then
   make prepare
   wget http://www.antlr.org/download/antlr-4.5-complete.jar
   mv antlr-4.5-complete.jar /usr/local/lib/
   apt-get -q install openjdk-7-jdk
   apt-get -q install flex
   apt-get -q install libncurses5-dev
   apt-get -q install expat
   apt-get -q install libexpat1-dev
   apt-get -q install astyle
   cpan App::cpanminus
   cpanm Spreadsheet::Read
   cpanm Spreadsheet::ReadSXC
fi

echo
echo "please log on as normal user and perform"
echo "make install"
