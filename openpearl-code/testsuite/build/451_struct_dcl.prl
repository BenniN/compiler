MODULE(struct_dcl_451);

PROBLEM;
   DCL s1 STRUCT [
    x FIXED(15),
    y FLOAT(52)
   ];

   ! -- C++ ---------------------- v -----------------------------------
   ! struct S6A15B52 {
   !   pearlrt::FIXED _m0;
   !   pearlrt::Float _m1;
   ! };
   !
   ! S6A15B52 _s1;
   ! -------------------------------------------------------------------

   p: PROC(s STRUCT [ k FIXED(15),
                      l FLOAT(52)]) RETURNS FLOAT;
       RETURN (s.k * 2 + s.l * 3.0);
   END;

   ! -- C++ ---------------------- v -----------------------------------
   ! pearlrt::Float p ( S6A15B2 s) {
   !   return (s._m0 * 2 + s._m1 * 3.0);
   ! }
   ! -------------------------------------------------------------------

ttt: TASK;
   DCL s1 STRUCT [
    x FIXED(15),
    y FLOAT(52)
   ];

   ! -- C++ ---------------------- v -----------------------------------
   ! S6A15B52 _s1;
   ! -------------------------------------------------------------------

   s1.x := 1;
   s1.y := 3.1415;

   ! -- C++ ---------------------- v -----------------------------------
   ! _s1._m0 = 1;
   ! _s1._m1 = 3.1415;
   ! -------------------------------------------------------------------

   s1.y := p(s1);

   ! -- C++ ---------------------- v -----------------------------------
   ! _s1._m1 = p(_s1);
   ! -------------------------------------------------------------------

   BEGIN
     DCL s2 STRUCT [
       x2 FIXED(15),
       y2 FLOAT(52)
      ];

   ! -- C++ ---------------------- v -----------------------------------
   ! S6A15B52 _s2;
   ! -------------------------------------------------------------------

      s2.x2 := 2;
      s2.y2 := 2.71;

   ! -- C++ ---------------------- v -----------------------------------
   ! _s2._m0 = 2;
   ! _s2._m1 = 2.71;
   ! -------------------------------------------------------------------

      s2.y := p(s2);

   ! -- C++ ---------------------- v -----------------------------------
   ! _s1._m1 = p(_s2);
   ! -------------------------------------------------------------------
   END;
END;

MODEND;
